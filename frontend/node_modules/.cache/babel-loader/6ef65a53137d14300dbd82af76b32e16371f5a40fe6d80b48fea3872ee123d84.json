{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\GidroAtlas\\\\frontend\\\\src\\\\components\\\\auth\\\\RequireAuth.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate, Outlet, useLocation } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { Loader2 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RequireAuth = ({\n  allowedRoles = []\n}) => {\n  _s();\n  const {\n    isAuthenticated,\n    userRole,\n    loading\n  } = useAuth();\n  const location = useLocation();\n\n  // Показываем загрузку пока проверяем аутентификацию\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen bg-gradient-to-br from-[#0a4275] to-[#1068a8] flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"w-16 h-16 text-white animate-spin mx-auto mb-4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 15,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-white text-lg\",\n          children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 16,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 13,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Если не аутентифицирован, перенаправляем на страницу входа\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Если роль не разрешена, перенаправляем на главную\n  if (allowedRoles.length > 0 && !allowedRoles.includes(userRole)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Если все проверки пройдены, рендерим дочерние маршруты\n  return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 10\n  }, this);\n};\n_s(RequireAuth, \"t11s8N9eFFoRsrVNdu5Bchoh3J0=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = RequireAuth;\nexport default RequireAuth;\nvar _c;\n$RefreshReg$(_c, \"RequireAuth\");","map":{"version":3,"names":["React","Navigate","Outlet","useLocation","useAuth","Loader2","jsxDEV","_jsxDEV","RequireAuth","allowedRoles","_s","isAuthenticated","userRole","loading","location","className","children","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","length","includes","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/GidroAtlas/frontend/src/components/auth/RequireAuth.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, Outlet, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { Loader2 } from 'lucide-react';\r\n\r\nconst RequireAuth = ({ allowedRoles = [] }) => {\r\n  const { isAuthenticated, userRole, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  // Показываем загрузку пока проверяем аутентификацию\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-[#0a4275] to-[#1068a8] flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <Loader2 className=\"w-16 h-16 text-white animate-spin mx-auto mb-4\" />\r\n          <p className=\"text-white text-lg\">Загрузка...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Если не аутентифицирован, перенаправляем на страницу входа\r\n  if (!isAuthenticated) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  // Если роль не разрешена, перенаправляем на главную\r\n  if (allowedRoles.length > 0 && !allowedRoles.includes(userRole)) {\r\n    return <Navigate to=\"/\" replace />;\r\n  }\r\n\r\n  // Если все проверки пройдены, рендерим дочерние маршруты\r\n  return <Outlet />;\r\n};\r\n\r\nexport default RequireAuth;"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,MAAM,EAAEC,WAAW,QAAQ,kBAAkB;AAChE,SAASC,OAAO,QAAQ,4BAA4B;AACpD,SAASC,OAAO,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,MAAMC,WAAW,GAAGA,CAAC;EAAEC,YAAY,GAAG;AAAG,CAAC,KAAK;EAAAC,EAAA;EAC7C,MAAM;IAAEC,eAAe;IAAEC,QAAQ;IAAEC;EAAQ,CAAC,GAAGT,OAAO,CAAC,CAAC;EACxD,MAAMU,QAAQ,GAAGX,WAAW,CAAC,CAAC;;EAE9B;EACA,IAAIU,OAAO,EAAE;IACX,oBACEN,OAAA;MAAKQ,SAAS,EAAC,6FAA6F;MAAAC,QAAA,eAC1GT,OAAA;QAAKQ,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BT,OAAA,CAACF,OAAO;UAACU,SAAS,EAAC;QAAgD;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACtEb,OAAA;UAAGQ,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAC;QAAW;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC9C;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;;EAEA;EACA,IAAI,CAACT,eAAe,EAAE;IACpB,oBAAOJ,OAAA,CAACN,QAAQ;MAACoB,EAAE,EAAC,QAAQ;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAET;MAAS,CAAE;MAACU,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpE;;EAEA;EACA,IAAIX,YAAY,CAACgB,MAAM,GAAG,CAAC,IAAI,CAAChB,YAAY,CAACiB,QAAQ,CAACd,QAAQ,CAAC,EAAE;IAC/D,oBAAOL,OAAA,CAACN,QAAQ;MAACoB,EAAE,EAAC,GAAG;MAACG,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpC;;EAEA;EACA,oBAAOb,OAAA,CAACL,MAAM;IAAAe,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAE,CAAC;AACnB,CAAC;AAACV,EAAA,CA5BIF,WAAW;EAAA,QACgCJ,OAAO,EACrCD,WAAW;AAAA;AAAAwB,EAAA,GAFxBnB,WAAW;AA8BjB,eAAeA,WAAW;AAAC,IAAAmB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}